(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{43853:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/market/create",function(){return n(45541)}])},45541:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var r=n(34051),s=n.n(r),a=n(85893),i=n(91107),l=n(77768),o=n(39279),c=n(91395),u=n(44718),d=n(54306),m=n(68155),p=n(13550),x=n.n(p),f=n(24762),h=n(11163),b=n(67294),g=n(87536),v=n(22920),y=n(74103),j=n(34103),k=n(65351);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}var S=function(e){var t=e.checked,n=e.children;return(0,a.jsx)("div",{className:(0,j.AK)("py-2 px-4 cursor-pointer text-sm rounded-full mr-1",t?"bg-[#A06BE5] hover:bg-[#9060CE] text-slate-200":"bg-slate-700 text-slate-400"),children:n})};function M(e){var t,n,r=e.useAdvancedOptions,s=e.register,o=e.setValue,c=e.formState.errors,u=e.totalMarketAccountSizes,d=function(e){x(e)},m=(0,b.useState)("DEFAULT"),p=m[0],x=m[1];return(0,b.useEffect)((function(){u&&u.totalEventQueueSize&&u.totalOrderbookSize&&u.totalRequestQueueSize?262108===u.totalEventQueueSize&&65500===u.totalOrderbookSize&&5084===u.totalRequestQueueSize&&d("DEFAULT"):d("DEFAULT")}),[u]),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6 flex",children:(0,a.jsxs)(i.E,{value:p,onChange:function(e){"LOW_COST"===e?(o("eventQueueLength",128),o("requestQueueLength",k.S7),o("orderbookLength",201),o("useAdvancedOptions",!0),d("LOW_COST")):"MIDDLE"===e?(o("eventQueueLength",1489),o("requestQueueLength",k.S7),o("orderbookLength",455),o("useAdvancedOptions",!0),d("MIDDLE")):(o("useAdvancedOptions",!1),d("DEFAULT"))},className:"space-y-1",children:[(0,a.jsx)(i.E.Label,{className:"input-label",children:"Quick Select"}),(0,a.jsxs)("div",{className:"flex rounded-md overflow-hidden",children:[(0,a.jsx)(i.E.Option,{value:"LOW_COST",children:function(e){var t=e.checked;return(0,a.jsx)(S,{checked:t,children:"Only Raydium"})}}),(0,a.jsx)(i.E.Option,{value:"DEFAULT",children:function(e){var t=e.checked;return(0,a.jsx)(S,{checked:t,children:"OpenBook + Raydium"})}})]}),"DEFAULT"!=p&&(0,a.jsx)("div",{className:"text-red-400 text-sm mt-2",children:"The selected option can only be used for Raydium pool creation purposes. Operation in Openbook is not guaranteed."})]})}),(0,a.jsxs)(l.r.Group,{as:"div",className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex flex-grow flex-col space-y-0.5",children:[(0,a.jsx)(l.r.Label,{as:"span",className:"input-label",passive:!0,children:"Use Advanced Options"}),(0,a.jsxs)(l.r.Description,{as:"span",className:"text-sm text-slate-500",children:["Set custom sizes for market accounts.",(0,a.jsx)("br",{}),"Market ID creation uses leased storage space on the Solana network.",(0,a.jsx)("br",{}),"Most of the fees are rent fees."]})]}),(0,a.jsx)(l.r,{checked:r,onChange:function(e){return o("useAdvancedOptions",e)},className:(0,j.AK)(r?"bg-[#A06BE5]":"bg-slate-400","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus-style"),children:(0,a.jsx)("span",{"aria-hidden":"true",className:(0,j.AK)(r?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})})]})]}),(0,a.jsxs)("div",{className:(0,j.AK)(r?"opacity-100":"opacity-30"),children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Event Queue Length"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",N({type:"number",disabled:!r,className:"block w-full rounded-md p-2 bg-slate-700 border-gray-300 focus-style sm:text-sm"},s("eventQueueLength",{min:{value:128,message:"Must be at least 128"},max:2978,required:!0}))),(0,a.jsxs)("p",{className:"absolute right-0 mr-2 text-sm text-slate-400",children:[u.totalEventQueueSize," bytes"]})]}),(null===c||void 0===c?void 0:c.eventQueueLength)?(0,a.jsx)("p",{className:"text-xs text-red-400 mt-1",children:null===c||void 0===c||null===(t=c.eventQueueLength)||void 0===t?void 0:t.message}):null]})]}),(0,a.jsxs)("div",{className:(0,j.AK)(r?"opacity-100":"opacity-30"),children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Request Queue Length"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",N({type:"number",disabled:!r,className:"block w-full rounded-md p-2 bg-slate-700 border-gray-300 focus-style sm:text-sm"},s("requestQueueLength",{min:1,max:100,required:!0}))),(0,a.jsxs)("p",{className:"absolute right-0 mr-2 text-sm text-slate-400",children:[u.totalRequestQueueSize," bytes"]})]})})]}),(0,a.jsxs)("div",{className:(0,j.AK)(r?"opacity-100":"opacity-30"),children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Orderbook Length"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("input",N({type:"number",disabled:!r,className:"block w-full rounded-md p-2 bg-slate-700 border-gray-300 focus-style sm:text-sm"},s("orderbookLength",{min:{value:201,message:"Must be at least 201"},max:1e3,required:!0}))),(0,a.jsxs)("p",{className:"absolute right-0 mr-2 text-sm text-slate-400",children:[u.totalOrderbookSize," bytes"]})]}),(null===c||void 0===c?void 0:c.orderbookLength)?(0,a.jsx)("p",{className:"text-xs text-red-400 mt-1",children:null===c||void 0===c||null===(n=c.orderbookLength)||void 0===n?void 0:n.message}):null]})]})]})}function A(e){var t=e.active,n=e.checked,r=e.children;return(0,a.jsx)("div",{className:(0,j.AK)("p-2 flex-1 border border-slate-600 rounded-md flex items-center justify-center text-sm",t?"bg-slate-600 border-slate-500":"bg-slate-700 border-slate-600",n?"border-[#A06BE5] text-[#AA68FF]":"text-slate-200"),children:r})}var O=n(78900);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){L(e,t,n[t])}))}return e}function P(e){var t,n,r,s,i,l,o=e.register,c=e.formState.errors;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Base Mint(Only Token Program)"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",E({type:"text",className:"block w-full rounded-md p-2 bg-slate-700 focus-style sm:text-sm"},o("existingMints.baseMint",{required:!0,validate:O.d}))),(null===c||void 0===c||null===(t=c.existingMints)||void 0===t?void 0:t.baseMint)?(0,a.jsx)("p",{className:"text-xs text-red-400 mt-1",children:null===c||void 0===c||null===(n=c.existingMints)||void 0===n||null===(r=n.baseMint)||void 0===r?void 0:r.message}):null]}),(0,a.jsx)("div",{className:"text-left text-[12px] text-slate-500 pb-2",children:"Token2022 does not yet support market creation."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Quote Mint"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",E({type:"text",className:"block w-full rounded-md p-2 bg-slate-700 focus-style sm:text-sm",defaultValue:"So11111111111111111111111111111111111111112"},o("existingMints.quoteMint",{required:!0,validate:O.d}))),(null===c||void 0===c||null===(s=c.existingMints)||void 0===s?void 0:s.quoteMint)?(0,a.jsx)("p",{className:"text-xs text-red-400 mt-1",children:null===c||void 0===c||null===(i=c.existingMints)||void 0===i||null===(l=i.quoteMint)||void 0===l?void 0:l.message}):null]})]})]})}function K(){return(0,a.jsxs)("div",{className:"divide-y divide-slate-700",children:[(0,a.jsxs)("div",{className:"pb-4 space-y-2 text-center pt-4",children:["No tokens created?",(0,a.jsx)("br",{}),"Proceed with token creation at Dexlab for MintingLab."]}),(0,a.jsx)("div",{className:"pt-12 pb-6 text-center",children:(0,a.jsx)("a",{className:"w-full md:max-w-xs rounded-lg p-2 bg-[#A06BE5] hover:bg-[#9060CE] transition-colors disabled:opacity-20",href:"https://www.dexlab.space/mintinglab/spl-token",target:"_blank",rel:"noreferrer",children:"Create SPL Token"})})]})}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){q(e,t,n[t])}))}return e}function Q(e){var t=e.register;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Min. Order Size"}),(0,a.jsxs)("div",{className:"relative mt-1 rounded-md shadow-sm",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,a.jsxs)("span",{className:"text-slate-400 sm:text-sm",children:["1e",(0,a.jsx)("sup",{children:"-x"})]})}),(0,a.jsx)("input",C({type:"number",className:"block w-full p-2 rounded-md text-slate-200 bg-slate-700 focus-style pl-16 sm:pl-14 sm:text-sm"},t("lotSize",{required:!0})))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{"data-tooltip-target":"tooltip-default",className:"block text-xs text-slate-400",children:"Price Tick"}),(0,a.jsxs)("div",{id:"tooltip-default",role:"tooltip",className:"inline-block absolute invisible z-10 py-2 px-3 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-sm opacity-0 transition-opacity duration-300 tooltip dark:bg-gray-700",children:["Tooltip content",(0,a.jsx)("div",{className:"tooltip-arrow","data-popper-arrow":!0})]}),(0,a.jsxs)("div",{className:"relative mt-1 rounded-md shadow-sm",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,a.jsxs)("span",{className:"text-slate-400 sm:text-sm",children:["1e",(0,a.jsx)("sup",{children:"-x"})]})}),(0,a.jsx)("input",C({type:"number",className:"block w-full p-2 rounded-md text-slate-200 bg-slate-700 focus-style pl-16 sm:pl-14 sm:text-sm"},t("tickSize",{required:!0})))]})]})]})}var z=n(83454),I=n(7975),T=n(8957),D=n(85972);function F(e,t,n,r,s,a,i){try{var l=e[a](i),o=l.value}catch(c){return void n(c)}l.done?t(o):Promise.resolve(o).then(r,s)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){F(a,r,s,i,l,"next",e)}function l(e){F(a,r,s,i,l,"throw",e)}i(void 0)}))}}function B(e){var t=(0,u.R)().connection,n=(0,b.useState)(0),r=n[0],a=n[1];return(0,b.useEffect)((function(){var n=!0;return function(){r.apply(this,arguments)}(),function(){n=!1};function r(){return(r=R(s().mark((function r(){var i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=3;break}return a(0),r.abrupt("return");case 3:return r.next=5,t.getMinimumBalanceForRentExemption(e);case 5:if(i=r.sent,n){r.next=8;break}return r.abrupt("return");case 8:a(i);case 9:case"end":return r.stop()}}),r)})))).apply(this,arguments)}}),[e,t.rpcEndpoint]),r}var V=n(48680);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n,r,s,a,i){try{var l=e[a](i),o=l.value}catch(c){return void n(c)}l.done?t(o):Promise.resolve(o).then(r,s)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){U(a,r,s,i,l,"next",e)}function l(e){U(a,r,s,i,l,"throw",e)}i(void 0)}))}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(o){l=!0,s=o}finally{try{i||null==n.return||n.return()}finally{if(l)throw s}}return a}}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}var H=m.ComputeBudgetProgram.setComputeUnitPrice({microLamports:2e5}),J=[{sendingMessage:"Creating mints.",successMessage:"Created mints successfully."},{sendingMessage:"Creating vaults.",successMessage:"Created vaults successfully."},{sendingMessage:"Creating market.",successMessage:"Created market successfully."}],X=function(){var e=(0,b.useState)(!1),t=e[0],n=e[1],r=(0,b.useState)(!1),p=r[0],w=r[1],N=(0,h.useRouter)(),S=(0,u.R)().connection,O=(0,d.O)(),L=(0,I.e)().programID,E=(0,g.cI)({defaultValues:{createMint:!1}}),q=E.register,C=E.handleSubmit,z=E.watch,F=E.setValue,R=E.formState,_=E.clearErrors,U=z("createMint"),$=z("useAdvancedOptions"),X=z("eventQueueLength"),Y=z("requestQueueLength"),ee=z("orderbookLength"),te=B(U?c.Bl:0),ne=B(c.lZ),re=function(e){var t=e.eventQueueLength,n=e.requestQueueLength,r=e.orderbookLength,s=(0,I.e)().programID,a=(0,b.useMemo)((function(){return(0,k.dT)(t,k.Bb,k.KQ)}),[t]),i=(0,b.useMemo)((function(){return(0,k.dT)(n,k.C1,k.zW)}),[n]),l=(0,b.useMemo)((function(){return(0,k.dT)(r,k.mf,k.yI)}),[r]);return{marketRent:B(o.Market.getLayout(s).span)+B(a)+B(i)+2*B(l),totalEventQueueSize:a,totalRequestQueueSize:i,totalOrderbookSize:l}}({eventQueueLength:X,requestQueueLength:Y,orderbookLength:ee}),se=re.marketRent,ae=re.totalEventQueueSize,ie=re.totalOrderbookSize,le=re.totalRequestQueueSize;(0,b.useEffect)((function(){$||(F("eventQueueLength",k.Sz),F("requestQueueLength",k.S7),F("orderbookLength",k.A3))}),[$,F]),(0,b.useEffect)((function(){U?(F("existingMints",void 0),_("existingMints")):(F("newMints",void 0),_("newMints"))}),[U,F,_]);var oe=V.kt;se<2e9&&(oe=V.Q9);var ce=function(){var e=Z(s().mark((function e(t){var r,i,l,u,d,p,f,h,b,g,j,w,M,A,E,P,K,q,C,Q,z,I,T;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&O.publicKey){e.next=4;break}return v.Am.error("Wallet not connected"),e.abrupt("return");case 4:return b=[],g=[],j=[],w=[],n(!0),b.push(H),j.push(H),e.prev=15,e.next=18,(0,c.ih)(S,new m.PublicKey(t.existingMints.baseMint));case 18:return M=e.sent,d=M.address,p=M.decimals,e.next=23,(0,c.ih)(S,new m.PublicKey(t.existingMints.quoteMint));case 23:A=e.sent,f=A.address,h=A.decimals,e.next=33;break;case 28:return e.prev=28,e.t0=e.catch(15),n(!1),v.Am.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Invalid mints provided."),e.abrupt("return");case 33:return E={market:m.Keypair.generate(),requestQueue:m.Keypair.generate(),eventQueue:m.Keypair.generate(),bids:m.Keypair.generate(),asks:m.Keypair.generate(),baseVault:m.Keypair.generate(),quoteVault:m.Keypair.generate()},e.t1=W,e.next=37,(0,k.aK)(E.market.publicKey,L);case 37:return e.t2=e.sent,P=(0,e.t1)(e.t2,2),K=P[0],q=P[1],e.t3=(r=b).push,e.t4=r,e.t5=m.SystemProgram,e.t6=O.publicKey,e.t7=E.baseVault.publicKey,e.next=48,S.getMinimumBalanceForRentExemption(c.lZ);case 48:return e.t8=e.sent,e.t9=c.lZ,e.t10=c.H_,e.t11={fromPubkey:e.t6,newAccountPubkey:e.t7,lamports:e.t8,space:e.t9,programId:e.t10},e.t12=e.t5.createAccount.call(e.t5,e.t11),e.t13=m.SystemProgram,e.t14=O.publicKey,e.t15=E.quoteVault.publicKey,e.next=58,S.getMinimumBalanceForRentExemption(c.lZ);case 58:if(e.t16=e.sent,e.t17=c.lZ,e.t18=c.H_,e.t19={fromPubkey:e.t14,newAccountPubkey:e.t15,lamports:e.t16,space:e.t17,programId:e.t18},e.t20=e.t13.createAccount.call(e.t13,e.t19),e.t21=(0,c.FJ)(E.baseVault.publicKey,d,K),e.t22=(0,c.FJ)(E.quoteVault.publicKey,f,K),e.t23=[e.t12,e.t20,e.t21,e.t22],e.t3.apply.call(e.t3,e.t4,e.t23),(i=b).push.apply(i,[m.SystemProgram.transfer({fromPubkey:O.publicKey,toPubkey:new m.PublicKey(V.zW),lamports:oe})]),g.push(E.baseVault,E.quoteVault),C=Math.round(Math.pow(10,p)*Math.pow(10,-1*t.lotSize)),Q=Math.round(Math.pow(10,h)*Math.pow(10,-1*t.lotSize)*Math.pow(10,-1*t.tickSize)),console.log("baseLotSize: ".concat(C," / quoteLotSize: ").concat(Q)),!(!t.tickSize||!t.lotSize||t.tickSize>0||t.lotSize>0)){e.next=80;break}if(!(C>0&&Q>0)){e.next=77;break}console.log("Valid base/quote lot size."),e.next=80;break;case 77:return n(!1),v.Am.error("Exceeded valid lot size. Please refer to the Gitbook tutorial docs."),e.abrupt("return");case 80:return e.t24=j,e.t25=m.SystemProgram,e.t26=E.market.publicKey,e.t27=O.publicKey,e.t28=o.Market.getLayout(L).span,e.next=87,S.getMinimumBalanceForRentExemption(o.Market.getLayout(L).span);case 87:return e.t29=e.sent,e.t30=L,e.t31={newAccountPubkey:e.t26,fromPubkey:e.t27,space:e.t28,lamports:e.t29,programId:e.t30},e.t32=e.t25.createAccount.call(e.t25,e.t31),e.t24.push.call(e.t24,e.t32),e.t33=j,e.t34=m.SystemProgram,e.t35=E.requestQueue.publicKey,e.t36=O.publicKey,e.t37=le,e.next=99,S.getMinimumBalanceForRentExemption(le);case 99:return e.t38=e.sent,e.t39=L,e.t40={newAccountPubkey:e.t35,fromPubkey:e.t36,space:e.t37,lamports:e.t38,programId:e.t39},e.t41=e.t34.createAccount.call(e.t34,e.t40),e.t33.push.call(e.t33,e.t41),e.t42=j,e.t43=m.SystemProgram,e.t44=E.eventQueue.publicKey,e.t45=O.publicKey,e.t46=ae,e.next=111,S.getMinimumBalanceForRentExemption(ae);case 111:return e.t47=e.sent,e.t48=L,e.t49={newAccountPubkey:e.t44,fromPubkey:e.t45,space:e.t46,lamports:e.t47,programId:e.t48},e.t50=e.t43.createAccount.call(e.t43,e.t49),e.t42.push.call(e.t42,e.t50),e.next=118,S.getMinimumBalanceForRentExemption(ie);case 118:return z=e.sent,j.push(m.SystemProgram.createAccount({newAccountPubkey:E.bids.publicKey,fromPubkey:O.publicKey,space:ie,lamports:z,programId:L})),j.push(m.SystemProgram.createAccount({newAccountPubkey:E.asks.publicKey,fromPubkey:O.publicKey,space:ie,lamports:z,programId:L})),w.push(E.market,E.requestQueue,E.eventQueue,E.bids,E.asks),j.push(o.DexInstructions.initializeMarket({market:E.market.publicKey,requestQueue:E.requestQueue.publicKey,eventQueue:E.eventQueue.publicKey,bids:E.bids.publicKey,asks:E.asks.publicKey,baseVault:E.baseVault.publicKey,quoteVault:E.quoteVault.publicKey,baseMint:d,quoteMint:f,baseLotSize:new(x())(C),quoteLotSize:new(x())(Q),feeRateBps:150,quoteDustThreshold:new(x())(500),vaultSignerNonce:q,programId:L})),(I=[]).push({transaction:(l=new m.Transaction).add.apply(l,G(b)),signers:g},{transaction:(u=new m.Transaction).add.apply(u,G(j)),signers:w}),e.prev=125,e.next=128,(0,D.Dr)({transactionsAndSigners:I,wallet:O,connection:S});case 128:return T=e.sent,e.next=131,(0,D.FI)({signedTransaction:T[0],connection:S,skipPreflight:!1,successCallback:function(){var e=Z(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.Am)((function(){return(0,a.jsx)(y.Z,{txSig:t,message:T.length>2?J[0].successMessage:J[1].successMessage})}),{autoClose:7e3});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendingCallback:Z(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.Am.info(T.length>2?J[0].sendingMessage:J[1].sendingMessage,{autoClose:5e3});case 1:case"end":return e.stop()}}),e)})))});case 131:return e.next=133,(0,D.FI)({signedTransaction:T[1],connection:S,skipPreflight:!1,successCallback:function(){var e=Z(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.Am)((function(){return(0,a.jsx)(y.Z,{txSig:t,message:T.length>2?J[1].successMessage:J[2].successMessage})}),{autoClose:7e3});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendingCallback:Z(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.Am.info(T.length>2?J[1].sendingMessage:J[2].sendingMessage,{autoClose:5e3});case 1:case"end":return e.stop()}}),e)})))});case 133:if(!(T.length>2)){e.next=136;break}return e.next=136,(0,D.FI)({signedTransaction:T[2],connection:S,skipPreflight:!1,successCallback:function(){var e=Z(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.Am)((function(){return(0,a.jsx)(y.Z,{txSig:t,message:J[2].successMessage})}),{autoClose:5e3});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendingCallback:Z(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.Am.info(J[2].sendingMessage,{autoClose:2e3});case 1:case"end":return e.stop()}}),e)})))});case 136:N.push({pathname:"".concat(E.market.publicKey.toBase58()),query:N.query}),e.next=144;break;case 139:e.prev=139,e.t51=e.catch(125),n(!1),console.error("[explorer]: ",e.t51),v.Am.error("Failed to create market. ".concat((null===e.t51||void 0===e.t51?void 0:e.t51.message)||""));case 144:n(!1);case 145:case"end":return e.stop()}}),e,null,[[15,28],[125,139]])})));return function(t){return e.apply(this,arguments)}}(),ue=(0,T.L4)(new(x())(oe+se+2*ne+2*te),9);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl text-slate-200",children:"Create Market"}),(0,a.jsxs)("div",{children:["Created markets cannot be canceled or refunded.",(0,a.jsx)("br",{}),"Please try publishing a test first through Devnet."]}),(0,a.jsxs)("div",{className:"text-sm mt-4",children:["Are you curious about how to create one?"," ",(0,a.jsx)("a",{className:"text-yellow-200 text-[22px] pl-2",target:"_blank",rel:"noreferrer",href:"https://docs.dexlab.space/products/minting-lab/create-openbook-market-id",children:"View tutorial"})]})]}),(0,a.jsx)("form",{onSubmit:C(ce),children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-slate-800 border border-slate-700 px-4 py-5 shadow rounded-lg sm:p-6",children:(0,a.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)("h3",{className:"text-lg font-medium leading-6 text-slate-200",children:"Mints"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Configure the mints for the tokens you want to create a market for."})]}),(0,a.jsxs)("div",{className:"mt-5 space-y-4 md:col-span-2 md:mt-0",children:[(0,a.jsx)("div",{children:(0,a.jsxs)(i.E,{value:U,onChange:function(e){return F("createMint",e)},children:[(0,a.jsx)(i.E.Label,{className:"sr-only",children:"Create Mint"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.E.Option,{value:!0,className:"flex-1 focus-style rounded-md cursor-pointer",children:function(e){var t=e.active,n=e.checked;return(0,a.jsx)(A,{active:t,checked:n,children:(0,a.jsx)("p",{children:"New Token"})})}}),(0,a.jsx)(i.E.Option,{value:!1,className:"flex-1 focus-style rounded-md cursor-pointer",children:function(e){var t=e.active,n=e.checked;return(0,a.jsx)(A,{active:t,checked:n,children:(0,a.jsx)("p",{children:"Create Market ID"})})}})]})]})}),(0,a.jsx)("div",{children:U?(0,a.jsx)(K,{}):(0,a.jsx)(P,{register:q,formState:R})})]})]})}),(0,a.jsx)("div",{className:"bg-slate-800 border border-slate-700 px-4 py-5 shadow rounded-lg sm:p-6",children:(0,a.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)("h3",{className:"text-lg font-medium leading-6 text-slate-200",children:"Tickers"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Configure the tick sizes, or lowest representable quantities of base and quote tokens."})]}),(0,a.jsx)("div",{className:"mt-5 space-y-4 md:col-span-2 md:mt-0",children:(0,a.jsx)(Q,{register:q})})]})}),(0,a.jsx)("div",{className:"bg-slate-800 border border-slate-700 px-4 py-5 shadow rounded-lg sm:p-6",children:(0,a.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)("h3",{className:"text-lg font-medium leading-6 text-slate-200",children:"Advanced Options"}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("div",{className:"mb-1 flex items-center space-x-1",children:(0,a.jsx)("p",{className:"text-xs text-slate-300",children:"Total Rent + Fee Estimate"})}),(0,a.jsxs)("p",{className:"text-lg text-[#AA68FF]",children:[ue," SOL"," "]})]})]}),(0,a.jsx)("div",{className:"mt-5 space-y-4 md:col-span-2 md:mt-0",children:(0,a.jsx)(M,{useAdvancedOptions:$,register:q,setValue:F,formState:R,totalMarketAccountSizes:{totalEventQueueSize:ae,totalRequestQueueSize:le,totalOrderbookSize:ie}})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(l.r.Group,{as:"div",className:"flex items-center justify-between w-[300px]",children:[(0,a.jsxs)("span",{className:"flex flex-grow flex-col space-y-0.5",children:[(0,a.jsx)(l.r.Label,{as:"span",className:"input-label font-bold",passive:!0,children:"Risk Agreement"}),(0,a.jsxs)(l.r.Description,{as:"span",className:"text-sm text-slate-500",children:["I confirm that I have confirmed all details and that I am fully responsible for creating the market.",(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-sm text-slate-400",children:["Need at least"," ",(0,a.jsxs)("span",{className:"text-lg font-bold text-yellow-300",children:[ue," SOL"]})," ","to prevent transaction failure."]})]})]}),(0,a.jsx)(l.r,{checked:p,onChange:function(e){return w(e)},className:(0,j.AK)(p?"bg-[#A06BE5]":"bg-slate-400","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus-style ml-6"),children:(0,a.jsx)("span",{"aria-hidden":"true",className:(0,j.AK)(p?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})})]})}),(0,a.jsx)("div",{className:"flex justify-end w-full",children:(0,a.jsx)("button",{disabled:t||!p,className:"w-full md:max-w-xs rounded-lg p-2 bg-[#A06BE5] hover:bg-[#9060CE] transition-colors disabled:opacity-20",children:t?"Send Transaction...":"Create"})}),(0,a.jsxs)("div",{className:"text-center text-red-300 text-lg",children:["If your $SOL",(0,a.jsxs)("span",{className:"text-sm text-red-400",children:["( ",ue," SOL )"]})," ","balance is insufficient, your transaction may fail and you may only be charged a fee."]})]})})]}),(0,a.jsx)(f.Z,{place:"right"})]})};X.getLayout=function(e){return(0,z.y)(e,"Create Market")};var Y=X},8957:function(e,t,n){"use strict";n.d(t,{DC:function(){return o},L4:function(){return u}});var r=n(13550),s=n.n(r);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(o){l=!0,s=o}finally{try{i||null==n.return||n.return()}finally{if(l)throw s}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return"".concat(e).replace(/(-?)(\d*)\.?(\d+)e([+-]\d+)/,(function(e,t,n,r,s){return s<0?"".concat(t,"0.").concat(Array(1-s-n.length).join("0")).concat(n).concat(r):t+n+r+Array(s-r.length+1).join("0")}))}function o(e,t){return function(e,t){var n=i(e.split("."),2),r=n[0],a=n[1],l=void 0===a?"":a;return new(s())("".concat(r).concat("0".repeat(t))).add(new(s())(l.padEnd(t,"0")))}(l(e.toString()),t)}function c(e,t){return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)}function u(e,t){var n,r,s=function(e,t){return Number(function(e,t){var n=e.toString().padStart(t+1,"0"),r=n.length-t;return"".concat(n.substring(0,r),".").concat(n.substring(r))}(e,t))}(e,t);return r=2,0===(n=s)?0===r?"0":"0.".concat("0".repeat(r)):n<.01?"<0.01":n>=1e9?"".concat(c(n/1e9,r),"B"):n>=1e6?"".concat(c(n/1e6,r),"M"):"".concat(c(n,r).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}}},function(e){e.O(0,[655,17,736,493,794,395,256,454,249,774,888,179],(function(){return t=43853,e(e.s=t);var t}));var t=e.O();_N_E=t}]);